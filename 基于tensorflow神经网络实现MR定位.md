# 基于tensorflow神经网络实现MR定位

## 项目背景介绍

​	移动用户手机处于开机状态时，基站和手机频繁的交互，从而保证手机处于通信状态。基于手机与周围基站的信号强弱，我们能估算出用户的大致位置。

## 原定位算法介绍

* 算法：混合高斯模型

* 思路：基于栅格的混合高斯分布，由朴素贝叶斯分类法，定位到栅格从而获取经纬度定位 

* 做法：

    step1: 栅格化地图，将训练数据映射到栅格上 
    ![训练数据分布图](picture\1.png)
    step2 :针对每一个栅格每一个主小区建立一个指纹，即主小区下每个小区的场强集对应一个混合高斯函数 
    ![栅格指纹库](picture\2.png)
    step3:
    > 训练 ：每条mr数据，根据实际经纬度和主基站找到指纹，以随机梯度的方式去更新各个混合高斯的参数

    > 预测：每条mr数据，根据主小区找到几个指纹（在不同的栅格下）。每个指纹下，通过各个小区的混合高斯分布函数，得到这条mr数据的概率（分布函数的概率的线性组合），即属于这个栅格的概率。最可能的栅格就是定位的结果。

* 优化：脏数据剔除，即训练数据中，实际的经纬度不在小区的覆盖半径内的，剔除掉 

* 弊端：模型100米准确率最多只能到达70%

    

##神经网络模型介绍
* 算法：cnn模型
* 思路：把手机与周围基站的场强，组成一个n维的输入向量（缺失值补零），2维的输出向量（分别相对于主小区基站的经纬度偏差）。使用随机梯度下降，最小化预测的偏差与实际的偏差的平方和。
* 神经网络结构图：
    ![神经网络结构图](picture\3.png)
* 缺点：tensorflow与分布式数据源无法结合（无法修改生成环境的部署内容）
* 解决方案：数据以离线的方式，推送到机器学习库，生成模型，应用生成